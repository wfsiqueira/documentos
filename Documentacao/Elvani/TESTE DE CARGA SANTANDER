*TESTE DE CARGA SANTANDER*

curl -X POST \
 http://172.18.5.138:8080/api/showcase/list \
 -H 'Postman-Token: 7a538dc5-69c4-48d1-8970-06c240185c8c' \
 -H 'cache-control: no-cache' \
 -H 'content-type: application/json' \
 -d '{"quantity": 9}'

ab -c 2000 -n 10000 -p test.json -T application/json -H '7a538dc5-69c4-48d1-8970-06c240185c8c' http://172.18.5.138:8080/api/showcase/list



curl -X POST \
 http://172.18.5.138:8080/api/client/search \
 -H 'Postman-Token: 81c8b913-73f4-427e-9e35-e330b3280cee' \
 -H 'accept: application/json' \
 -H 'allVisible: true' \
 -H 'cache-control: no-cache' \
 -H 'content-type: application/json' \
 -d '    {"cpfCnpj": "26123078852"}'

ab -c 2000 -n 10000 -p test.json -T application/json -H '7a538dc5-69c4-48d1-8970-06c240185c8c' http://172.18.5.138:8080/api/client/search


while true; do netstat -taunp | grep 8080 | grep ESTABLISHED | wc -l; sleep 1; done;
while true; do netstat -taunp | grep 8080 | grep TIME_WAIT | wc -l; sleep 1; done;



export SPRING_SERVER_TOMCAT_ACCESSLOG_DIRECTORY=/home/santander-marketplace/testeelvani/accesslog
export SPRING_SERVER_TOMCAT_ACCESSLOG_ENABLED=false
export SPRING_SERVER_TOMCAT_ACCESSLOG_FILE-date_format=.yyyy-MM-dd
export SPRING_SERVER_TOMCAT_ACCESSLOG_PREFIX=access_log


export SPRING_SERVER_TOMCAT_ACCESSLOG_DIRECTORY="/home/santander-marketplace/testeelvani/"
export SPRING_SERVER_TOMCAT_ACCESSLOG_ENABLED="true"
export SPRING_SERVER_TOMCAT_ACCESSLOG_FILE-date_format=".yyyy-MM-dd"
export SPRING_SERVER_TOMCAT_ACCESSLOG_PREFIX="access_log"



-Dserver.tomcat.max-connections=100
-Dserver.tomcat.max-threads=12

java -Dspring.profiles.active=prd -DSPRING.DATASOURCE.USERNAME=zup -Dspring_datasource_password=Apaa679tc5WnCF8F -Dspring_rabbitmq_host=i-commons-rabbitmq-lb.azure.zup.com.br -Dspring_rabbitmq_password=kcJz2S86 -Dspring_rabbitmq_port=5672 -Dspring_rabbitmq_username=stdmkt -Dspring_server_tomcat_max-connections=100 -jar /opt/santander-marketplace/santander-marketplace.jar


https://spring.io/blog/2015/12/10/spring-boot-memory-performance
https://tomcat.apache.org/tomcat-8.5-doc/config/http.html
https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
https://gist.github.com/kelvinn/6a1c51b8976acf25bd78 - Example of using Apache Bench (ab) to POST JSON to an API
https://prabuddha.me/apache-bench-ab-post-json-api/ - Apache Bench (ab) to POST JSON to an API



az vmss update --set virtualMachineProfile.storageProfile.imageReference.id="/subscriptions/a3d06c53-f000-4640-bfcc-a56eb65ac037/resourceGroups/Santander-MKT/providers/Microsoft.Compute/images/santander-mkt-application01-template-image-20181026121011" -g Santander-MKT -n santandermktapp




/opt/santander-marketplace/mp-application/target/classes/log4j/prd/log4j.properties
/opt/santander-marketplace/vendor/pkgr/processes/application
/opt/santander-marketplace/.profile.d/java.sh
/usr/bin/santander-marketplace run application




az vmss update --set virtualMachineProfile.storageProfile.imageReference.id="/subscriptions/a3d06c53-f000-4640-bfcc-a56eb65ac037/resourceGroups/Santander-MKT/providers/Microsoft.Compute/images/santander-mkt-application01-template-image-20181026182309" -g Santander-MKT -n santandermktapp




/subscriptions/a3d06c53-f000-4640-bfcc-a56eb65ac037/resourceGroups/Santander-MKT/providers/Microsoft.Compute/images/santander-mkt-application01-template-image-20181026182309




az vmss create --resource-group Santander-MKT --name santandermktapp --image "/subscriptions/a3d06c53-f000-4640-bfcc-a56eb65ac037/resourceGroups/Santander-MKT/providers/Microsoft.Compute/images/santander-mkt-application01-template-image-20181026182309" --upgrade-policy-mode automatic --authentication-type password --admin-username azure-admin --admin-password 'f^Y|=v:kWNtWy|9!y+K;dMDRP' --vm-sku Standard_DS2_V2 --storage-sku Premium_LRS